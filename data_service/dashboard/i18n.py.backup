#!/usr/bin/env python3
"""
Internationalization (i18n) support for Trading Dashboard
Supports multiple languages including English and Chinese
"""

# Language translations
TRANSLATIONS = {
    'en': {
        # Page config
        'page_title': 'Trading System Dashboard',
        'main_header': 'ğŸ“ˆ Trading System Dashboard',

        # Sidebar
        'sidebar_title': 'ğŸ›ï¸ Dashboard Controls',
        'language': 'Language',
        'date_range': 'ğŸ“… Date Range',
        'start_date': 'Start Date',
        'end_date': 'End Date',
        'strategy': 'ğŸ¯ Strategy',
        'select_strategy': 'Select Strategy',
        'symbols': 'ğŸ“ˆ Symbols',
        'select_symbols': 'Select Symbols',
        'capital': 'ğŸ’° Capital',
        'initial_capital': 'Initial Capital ($)',

        # Tabs
        'tab_performance': 'ğŸ“Š Performance Analysis',
        'tab_backtest': 'ğŸ¯ Strategy Backtest',
        'tab_market': 'ğŸ“ˆ Market Data',
        'tab_ai': 'ğŸ¤– AI Analysis',
        'tab_system': 'âš™ï¸ System Status',

        # Performance Analysis
        'performance_title': 'Performance Metrics',
        'detailed_metrics': 'Detailed Performance Metrics',
        'total_return': 'Total Return',
        'annualized_return': 'Annualized Return',
        'volatility': 'Volatility',
        'sharpe_ratio': 'Sharpe Ratio',
        'sortino_ratio': 'Sortino Ratio',
        'max_drawdown': 'Max Drawdown',
        'calmar_ratio': 'Calmar Ratio',
        'win_rate': 'Win Rate',
        'profit_factor': 'Profit Factor',
        'total_trades': 'Total Trades',
        'equity_curve': 'ğŸ“ˆ Equity Curve',
        'drawdown_chart': 'ğŸ“‰ Drawdown Analysis',
        'returns_distribution': 'ğŸ“Š Returns Distribution',
        'monthly_returns': 'ğŸ“ˆ Rolling Metrics',

        # Strategy Backtest
        'backtest_title': 'Strategy Backtest',
        'strategy_parameters': 'âš™ï¸ Strategy Parameters',
        'backtest_settings': 'ğŸ“Š Backtest Settings',
        'lookback_period': 'Lookback Period',
        'rebalance_frequency': 'Rebalance Frequency',
        'commission': 'Commission (%)',
        'slippage': 'Slippage (%)',
        'run_backtest': 'Run Backtest',
        'backtest_results': 'ğŸ“ˆ Backtest Results',
        'backtest_completed': 'âœ… Backtest completed successfully!',
        'strategy_comparison': 'Strategy Comparison',

        # Market Data
        'market_title': 'Market Data',
        'select_symbol': 'Select Symbol',
        'price_chart': 'Price Chart',
        'volume_analysis': 'ğŸ“Š Volume Analysis',
        'technical_indicators': 'ğŸ“ˆ Technical Indicators',
        'market_statistics': 'ğŸ“‹ Market Statistics',
        'current_price': 'Current Price',
        'daily_return': 'Daily Return',
        'avg_volume': 'Avg Volume',

        # AI Analysis
        'ai_title': 'AI-Powered Analysis',
        'sentiment_analysis': 'ğŸ“ Sentiment Analysis',
        'enter_text': 'Enter text for sentiment analysis',
        'analyze': 'Analyze',
        'sentiment': 'Sentiment',
        'confidence': 'Confidence',
        'keywords': 'Keywords',
        'detailed_analysis': 'ğŸ“Š Detailed Analysis',
        'cleaned_text': 'Cleaned Text',
        'topics': 'Topics',
        'language_detected': 'Language',
        'all_keywords': 'All Keywords',
        'factor_analysis': 'ğŸ“ˆ Factor Analysis',
        'calculate_factors': 'Calculate Factors',
        'factor_performance': 'ğŸ“Š Factor Performance',
        'factor_correlation': 'ğŸ”¥ Factor Correlation',
        'market_prediction': 'Market Prediction',
        'news_analysis': 'News Analysis',
        'recommendation': 'AI Recommendation',

        # System Status
        'system_title': 'System Status',
        'system_metrics': 'ğŸ“Š System Metrics',
        'cpu_usage': 'CPU Usage',
        'memory_usage': 'Memory Usage',
        'active_connections': 'Active Connections',
        'api_calls_per_min': 'API Calls/min',
        'system_health': 'ğŸ¥ System Health',
        'recent_logs': 'ğŸ“‹ Recent Logs',
        'data_sources': 'Data Sources',
        'api_status': 'API Status',
        'last_update': 'Last Update',

        # Strategies
        'momentum_strategy': 'Momentum Strategy',
        'value_strategy': 'Value Strategy',
        'mean_reversion': 'Mean Reversion',
        'custom_strategy': 'Custom',

        # Common
        'loading': 'Loading...',
        'error': 'Error',
        'success': 'Success',
        'warning': 'Warning',
        'info': 'Info',
        'date': 'Date',
        'value': 'Value',
        'change': 'Change',
        'status': 'Status',
        'metric': 'Metric',
        'active': 'Active',
        'inactive': 'Inactive',
        'connected': 'Connected',
        'disconnected': 'Disconnected',
        'days': 'days',
        'daily': 'Daily',
        'weekly': 'Weekly',
        'monthly': 'Monthly',
    },

    'zh': {
        # Page config
        'page_title': 'é‡åŒ–äº¤æ˜“ç³»ç»Ÿä»ªè¡¨æ¿',
        'main_header': 'ğŸ“ˆ é‡åŒ–äº¤æ˜“ç³»ç»Ÿä»ªè¡¨æ¿',

        # Sidebar
        'sidebar_title': 'ğŸ›ï¸ æ§åˆ¶é¢æ¿',
        'language': 'è¯­è¨€',
        'date_range': 'ğŸ“… æ—¥æœŸèŒƒå›´',
        'start_date': 'å¼€å§‹æ—¥æœŸ',
        'end_date': 'ç»“æŸæ—¥æœŸ',
        'strategy': 'ğŸ¯ ç­–ç•¥',
        'select_strategy': 'é€‰æ‹©ç­–ç•¥',
        'symbols': 'ğŸ“ˆ äº¤æ˜“å“ç§',
        'select_symbols': 'é€‰æ‹©äº¤æ˜“å“ç§',
        'capital': 'ğŸ’° èµ„é‡‘',
        'initial_capital': 'åˆå§‹èµ„é‡‘ ($)',

        # Tabs
        'tab_performance': 'ğŸ“Š ç»©æ•ˆåˆ†æ',
        'tab_backtest': 'ğŸ¯ ç­–ç•¥å›æµ‹',
        'tab_market': 'ğŸ“ˆ å¸‚åœºæ•°æ®',
        'tab_ai': 'ğŸ¤– AI åˆ†æ',
        'tab_system': 'âš™ï¸ ç³»ç»ŸçŠ¶æ€',

        # Performance Analysis
        'performance_title': 'ç»©æ•ˆæŒ‡æ ‡',
        'detailed_metrics': 'è¯¦ç»†ç»©æ•ˆæŒ‡æ ‡',
        'total_return': 'æ€»æ”¶ç›Šç‡',
        'annualized_return': 'å¹´åŒ–æ”¶ç›Šç‡',
        'volatility': 'æ³¢åŠ¨ç‡',
        'sharpe_ratio': 'å¤æ™®æ¯”ç‡',
        'sortino_ratio': 'ç´¢æè¯ºæ¯”ç‡',
        'max_drawdown': 'æœ€å¤§å›æ’¤',
        'calmar_ratio': 'å¡ç›æ¯”ç‡',
        'win_rate': 'èƒœç‡',
        'profit_factor': 'ç›ˆäºæ¯”',
        'total_trades': 'æ€»äº¤æ˜“æ¬¡æ•°',
        'equity_curve': 'ğŸ“ˆ æƒç›Šæ›²çº¿',
        'drawdown_chart': 'ğŸ“‰ å›æ’¤åˆ†æ',
        'returns_distribution': 'ğŸ“Š æ”¶ç›Šåˆ†å¸ƒ',
        'monthly_returns': 'ğŸ“ˆ æ»šåŠ¨æŒ‡æ ‡',

        # Strategy Backtest
        'backtest_title': 'ç­–ç•¥å›æµ‹',
        'strategy_parameters': 'âš™ï¸ ç­–ç•¥å‚æ•°',
        'backtest_settings': 'ğŸ“Š å›æµ‹è®¾ç½®',
        'lookback_period': 'å›çœ‹å‘¨æœŸ',
        'rebalance_frequency': 'å†å¹³è¡¡é¢‘ç‡',
        'commission': 'æ‰‹ç»­è´¹ (%)',
        'slippage': 'æ»‘ç‚¹ (%)',
        'run_backtest': 'è¿è¡Œå›æµ‹',
        'backtest_results': 'ğŸ“ˆ å›æµ‹ç»“æœ',
        'backtest_completed': 'âœ… å›æµ‹æˆåŠŸå®Œæˆï¼',
        'strategy_comparison': 'ç­–ç•¥å¯¹æ¯”',

        # Market Data
        'market_title': 'å¸‚åœºæ•°æ®',
        'select_symbol': 'é€‰æ‹©å“ç§',
        'price_chart': 'ä»·æ ¼èµ°åŠ¿',
        'volume_analysis': 'ğŸ“Š æˆäº¤é‡åˆ†æ',
        'technical_indicators': 'ğŸ“ˆ æŠ€æœ¯æŒ‡æ ‡',
        'market_statistics': 'ğŸ“‹ å¸‚åœºç»Ÿè®¡',
        'current_price': 'å½“å‰ä»·æ ¼',
        'daily_return': 'æ—¥æ”¶ç›Šç‡',
        'avg_volume': 'å¹³å‡æˆäº¤é‡',

        # AI Analysis
        'ai_title': 'AI æ™ºèƒ½åˆ†æ',
        'sentiment_analysis': 'ğŸ“ æƒ…ç»ªåˆ†æ',
        'enter_text': 'è¾“å…¥æ–‡æœ¬è¿›è¡Œæƒ…ç»ªåˆ†æ',
        'analyze': 'åˆ†æ',
        'sentiment': 'æƒ…ç»ª',
        'confidence': 'ç½®ä¿¡åº¦',
        'keywords': 'å…³é”®è¯',
        'detailed_analysis': 'ğŸ“Š è¯¦ç»†åˆ†æ',
        'cleaned_text': 'æ¸…ç†åæ–‡æœ¬',
        'topics': 'ä¸»é¢˜',
        'language_detected': 'è¯­è¨€',
        'all_keywords': 'æ‰€æœ‰å…³é”®è¯',
        'factor_analysis': 'ğŸ“ˆ å› å­åˆ†æ',
        'calculate_factors': 'è®¡ç®—å› å­',
        'factor_performance': 'ğŸ“Š å› å­è¡¨ç°',
        'factor_correlation': 'ğŸ”¥ å› å­ç›¸å…³æ€§',
        'market_prediction': 'å¸‚åœºé¢„æµ‹',
        'news_analysis': 'æ–°é—»åˆ†æ',
        'recommendation': 'AI æ¨è',

        # System Status
        'system_title': 'ç³»ç»ŸçŠ¶æ€',
        'system_metrics': 'ğŸ“Š ç³»ç»ŸæŒ‡æ ‡',
        'cpu_usage': 'CPU ä½¿ç”¨ç‡',
        'memory_usage': 'å†…å­˜ä½¿ç”¨',
        'active_connections': 'æ´»è·ƒè¿æ¥',
        'api_calls_per_min': 'API è°ƒç”¨/åˆ†é’Ÿ',
        'system_health': 'ğŸ¥ ç³»ç»Ÿå¥åº·åº¦',
        'recent_logs': 'ğŸ“‹ æœ€è¿‘æ—¥å¿—',
        'data_sources': 'æ•°æ®æº',
        'api_status': 'API çŠ¶æ€',
        'last_update': 'æœ€åæ›´æ–°',

        # Strategies
        'momentum_strategy': 'åŠ¨é‡ç­–ç•¥',
        'value_strategy': 'ä»·å€¼ç­–ç•¥',
        'mean_reversion': 'å‡å€¼å›å½’',
        'custom_strategy': 'è‡ªå®šä¹‰',

        # Common
        'loading': 'åŠ è½½ä¸­...',
        'error': 'é”™è¯¯',
        'success': 'æˆåŠŸ',
        'warning': 'è­¦å‘Š',
        'info': 'ä¿¡æ¯',
        'date': 'æ—¥æœŸ',
        'value': 'æ•°å€¼',
        'change': 'å˜åŒ–',
        'status': 'çŠ¶æ€',
        'metric': 'æŒ‡æ ‡',
        'active': 'æ´»è·ƒ',
        'inactive': 'æœªæ¿€æ´»',
        'connected': 'å·²è¿æ¥',
        'disconnected': 'æœªè¿æ¥',
        'days': 'å¤©',
        'daily': 'æ¯æ—¥',
        'weekly': 'æ¯å‘¨',
        'monthly': 'æ¯æœˆ',
    }
}

class I18n:
    """Internationalization helper class"""

    def __init__(self, language='en'):
        """
        Initialize i18n with specified language

        Args:
            language: Language code ('en', 'zh', etc.)
        """
        self.language = language
        self.translations = TRANSLATIONS.get(language, TRANSLATIONS['en'])

    def t(self, key, default=None):
        """
        Get translation for a key

        Args:
            key: Translation key
            default: Default value if key not found

        Returns:
            Translated string
        """
        return self.translations.get(key, default or key)

    def set_language(self, language):
        """
        Change current language

        Args:
            language: New language code
        """
        if language in TRANSLATIONS:
            self.language = language
            self.translations = TRANSLATIONS[language]

    def get_available_languages(self):
        """
        Get list of available languages

        Returns:
            Dictionary of language codes and names
        """
        return {
            'en': 'English',
            'zh': 'ä¸­æ–‡'
        }

# Singleton instance
_i18n_instance = None

def get_i18n(language='en'):
    """
    Get or create i18n instance

    Args:
        language: Language code

    Returns:
        I18n instance
    """
    global _i18n_instance
    if _i18n_instance is None or _i18n_instance.language != language:
        _i18n_instance = I18n(language)
    return _i18n_instance
