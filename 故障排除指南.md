# ğŸ”§ åŠ å¯†è´§å¸æ•°æ®è·å–æ•…éšœæ’é™¤

## å·²æ·»åŠ çš„æ”¹è¿›

### 1. æ—¥æœŸç±»å‹è½¬æ¢
ä¿®å¤äº† `date` å¯¹è±¡å’Œ `datetime` å¯¹è±¡çš„å…¼å®¹æ€§é—®é¢˜ï¼š

```python
# ç¡®ä¿æ—¥æœŸæ˜¯ datetime å¯¹è±¡
if hasattr(start_date, 'date'):
    # å·²ç»æ˜¯ datetime
    pass
else:
    # æ˜¯ date å¯¹è±¡ï¼Œè½¬æ¢ä¸º datetime
    from datetime import datetime as dt
    start_date = dt.combine(start_date, dt.min.time())
    end_date = dt.combine(end_date, dt.min.time())
```

### 2. è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
æ·»åŠ äº†å®æ—¶åé¦ˆï¼Œå¸®åŠ©è¯Šæ–­é—®é¢˜ï¼š

```python
st.info(f"ğŸ” Fetching {symbol} data for {days_diff} days...")
logger.info(f"Fetching crypto data for {symbol}, days={days_diff}")
logger.info(f"Received data shape: {data.shape}, empty: {data.empty}")
```

### 3. å¢å¼ºçš„é”™è¯¯å¤„ç†
æ•è·å¹¶æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼š

```python
except Exception as e:
    st.error(f"âŒ Error: Failed to fetch {symbol} data: {str(e)}")
    logger.error(f"Error fetching crypto data for {symbol}: {e}")
    import traceback
    logger.error(traceback.format_exc())
```

## æµ‹è¯•æ­¥éª¤

### 1. é‡æ–°å¯åŠ¨ä»ªè¡¨æ¿
```bash
cd D:\sheldonproject\QuantMuse1
python run_dashboard.py
```

### 2. æµ‹è¯•åŠ å¯†è´§å¸å›æµ‹

1. åœ¨ä¾§è¾¹æ é€‰æ‹© **"â‚¿ Cryptocurrency"**
2. é€‰æ‹©æˆ–è¾“å…¥ **bitcoin**
3. è®¾ç½®æ—¥æœŸèŒƒå›´ï¼ˆå»ºè®®ï¼šæœ€è¿‘30å¤©ï¼‰
4. é€‰æ‹©ç­–ç•¥ï¼ˆå¦‚ Momentum Strategyï¼‰
5. åˆ‡æ¢åˆ° **Performance Analysis** æ ‡ç­¾é¡µ
6. ç‚¹å‡» **"Run Backtest"**

### 3. è§‚å¯Ÿè¾“å‡º

ç°åœ¨ä½ ä¼šçœ‹åˆ°è¯¦ç»†çš„è¿›åº¦ä¿¡æ¯ï¼š

```
ğŸ” Fetching bitcoin data for 30 days...
âœ… bitcoin: 721 data points
âœ… Analysis completed successfully!
```

## å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æ•°æ®ä»ç„¶ä¸ºç©º

**å¯èƒ½åŸå› **ï¼š
- CoinGecko API é€Ÿç‡é™åˆ¶
- ç½‘ç»œè¿æ¥é—®é¢˜
- åŠ å¯†è´§å¸ ID é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç­‰å¾… 1-2 åˆ†é’Ÿåé‡è¯•
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. ç¡®è®¤åŠ å¯†è´§å¸ ID æ­£ç¡®ï¼ˆè®¿é—® coingecko.comï¼‰

### é—®é¢˜ 2: æ—¥æœŸèŒƒå›´è¿‡å¤§

**ç—‡çŠ¶**ï¼š
```
âš ï¸ Warning: bitcoin - Returned data is empty
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å‡å°‘æ—¥æœŸèŒƒå›´ï¼ˆå»ºè®® â‰¤ 90 å¤©ï¼‰
- CoinGecko å…è´¹ API å¯¹å†å²æ•°æ®æœ‰é™åˆ¶

### é—®é¢˜ 3: API é€Ÿç‡é™åˆ¶

**ç—‡çŠ¶**ï¼š
```
âŒ Error: Failed to fetch bitcoin data: 429 Too Many Requests
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç­‰å¾… 5-10 åˆ†é’Ÿ
- å‡å°‘åŒæ—¶æµ‹è¯•çš„åŠ å¯†è´§å¸æ•°é‡
- è€ƒè™‘ä½¿ç”¨ CoinGecko Pro API

## éªŒè¯ä¿®å¤

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯æ•°æ®è·å–ï¼š

```bash
cd D:\sheldonproject\QuantMuse1
python -c "
from data_service.fetchers.live_data import LiveDataFetcher
from datetime import datetime, timedelta, date

fetcher = LiveDataFetcher()

# æµ‹è¯• date å¯¹è±¡
start = date.today() - timedelta(days=30)
end = date.today()

# è½¬æ¢ä¸º datetime
from datetime import datetime as dt
start_dt = dt.combine(start, dt.min.time())
end_dt = dt.combine(end, dt.min.time())

days = (end_dt - start_dt).days
print(f'Days: {days}')

# è·å–æ•°æ®
data = fetcher.get_crypto_history('bitcoin', days=days)
print(f'Data shape: {data.shape}')
print(f'Empty: {data.empty}')
"
```

é¢„æœŸè¾“å‡ºï¼š
```
Days: 30
Data shape: (721, 6)
Empty: False
```

## æ—¥å¿—ä½ç½®

æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
- æ§åˆ¶å°è¾“å‡º
- Streamlit ç•Œé¢çš„å®æ—¶æ¶ˆæ¯

## ä¸‹ä¸€æ­¥

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š
1. æ£€æŸ¥æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯å †æ ˆ
2. ç¡®è®¤ pycoingecko ç‰ˆæœ¬ï¼š`pip show pycoingecko`
3. å°è¯•æ›´æ–°ï¼š`pip install --upgrade pycoingecko`
4. æµ‹è¯•å…¶ä»–åŠ å¯†è´§å¸ï¼ˆå¦‚ ethereumï¼‰

---

**ç°åœ¨é‡æ–°æµ‹è¯•ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°è¯¦ç»†çš„è¿›åº¦ä¿¡æ¯ï¼**
